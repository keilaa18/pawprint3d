<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PawPrint-3D</title>

  <!-- CSS principal -->
  <link rel="stylesheet" href="style.css?v=1.0" />

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>

  <!-- Men√∫ hamburguesa -->
  <div class="hamburguesa-menu">
    <div class="hamburguesa-icono" onclick="toggleHamburguesa()">
      <span></span><span></span><span></span>
    </div>
    <div class="hamburguesa-panel" id="hamburguesa-panel" style="display: none;">
      <ul>
        <li><a href="productos.html">Productos</a></li>
        <li><a href="ayuda.html">Ayuda</a></li>
        <li><a href="reclamos.html">Reclamos</a></li>
      </ul>
    </div>
  </div>

  <!-- √çconos -->
  <div class="iconos-superiores">
    <a href="login.html" class="usuario-icono">üë§</a>
    <div class="carrito-icono" onclick="toggleCarrito()">üõí</div>
  </div>

  <!-- Carrito -->
  <div class="carrito-panel" id="carrito">
    <div class="carrito-header">
      <h3>Tu Carrito</h3>
      <span class="cerrar-carrito" onclick="toggleCarrito()">‚úñ</span>
    </div>
    <div class="carrito-items" id="carrito-items">
      <p>Tu carrito est√° vac√≠o</p>
    </div>
  </div>

  <!-- Header -->
  <header class="header">
    <div class="menu container">
      <a href="#" class="logo">logo</a>
    </div>
    <div class="header-content container">
      <h1>PawPrint-3D</h1>
      <p>Dise√±amos y fabricamos dispositivos de movilidad a la medida de tu mascota.</p>
      <a href="formulario.html" class="btn-1">¬øEs mi mascota un buen candidato?</a>
    </div>
  </header>

  <!-- Secci√≥n coffee -->
  <section class="coffee">
    <img class="coffee-img" src="images/bg2.jpg" alt="">
    <div class="coffee-content container">
      <h2>Los diferentes tipos de pr√≥tesis</h2>
      <p class="txt-p">Lorem ipsum dolor sit amet consectetur adipisicing elit...</p>
      <div class="coffe-grup">
        <div class="coffee-1">
          <img src="images/c1.png" alt="">
          <h3>Pr√≥tesis 1</h3>
          <p>Pr√≥tesis ligeras para perros peque√±os.</p>
        </div>
        <div class="coffee-1">
          <img src="images/c2.png" alt="">
          <h3>Pr√≥tesis 2</h3>
          <p>Sillas de ruedas para perros medianos.</p>
        </div>
        <div class="coffee-1">
          <img src="images/c3.png" alt="">
          <h3>Pr√≥tesis 3</h3>
          <p>Pr√≥tesis resistentes para perros grandes.</p>
        </div>
      </div>
      <a href="productos.html" class="btn-1">Informaci√≥n</a>
    </div>
  </section>

  <!-- Productos -->
  <main class="services">
    <div class="services-content container">
      <h2>Productos de las pr√≥tesis</h2>
      <div class="services-group">
        <div class="services-1"><img src="images/i1.png" alt=""><h3>Material</h3></div>
        <div class="services-1"><img src="images/i2.png" alt=""><h3>M√°quina</h3></div>
        <div class="services-1"><img src="images/i3.png" alt=""><h3>Filamento</h3></div>
      </div>
      <p>Estos son los materiales que usamos para fabricar.</p>
      <a href="ayuda.html" class="btn-1">Informaci√≥n</a>
    </div>
  </main>

  <!-- General 1 -->
  <section class="general">
    <div class="general-1">
      <h2>Vuelve a correr, vuelve a jugar</h2>
      <p>Dise√±adas para mejorar la calidad de vida de tu mascota.</p>
    </div>
    <div class="general-2"></div>
  </section>

  <!-- General 2 -->
  <section class="general">
    <div class="general-3"></div>
    <div class="general-1">
      <h2>Tecnolog√≠a que transforma vidas</h2>
      <p>Ayudamos a perros amputados o con malformaciones.</p>
    </div>
  </section>

  <!-- Blog / Testimonios -->
  <section class="blog container">
    <h2>Testimonios</h2>
    <p>Cada pr√≥tesis, una nueva oportunidad.</p>
    <div class="blog-content">
      <div class="blog-1">
        <img src="images/blog1.jpg" alt="">
        <h3>Rocky</h3>
        <p>‚ÄúGracias a ustedes, Rocky volvi√≥ a correr.‚Äù ‚Äî Luc√≠a G., C√≥rdoba</p>
      </div>
      <div class="blog-2">
        <img src="images/blog2.jpg" alt="">
        <h3>Max</h3>
        <p>‚ÄúLa pr√≥tesis de Max super√≥ nuestras expectativas.‚Äù ‚Äî Federico R., Mendoza</p>
      </div>
      <div class="blog-3">
        <img src="images/blog3.jpg" alt="">
        <h3>Luna</h3>
        <p>‚ÄúUna soluci√≥n real para nuestros peludos.‚Äù ‚Äî Carla y Tom√°s, Buenos Aires</p>
      </div>
    </div>
  </section>

  <!-- Mapa separado -->
  <section class="mapa-section container">
    <h2>Veterinarias cercanas</h2>
    <div id="mapa" style="height: 400px; border-radius: 10px;"></div>
    <a href="ayuda.html" class="btn-1">Informaci√≥n</a>
  </section>

  <!-- Formulario de registro -->
  <section class="registro container" style="margin:2em 0;">
    <h2>Registro de usuario</h2>
    <form id="formRegistro">
      <label for="email">Email:</label><br/>
      <input type="email" id="email" required /><br/><br/>
      <label for="password">Contrase√±a:</label><br/>
      <input type="password" id="password" required /><br/><br/>
      <button type="submit">Registrarse</button>
    </form>
    <p id="mensaje"></p>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content container">
      <div class="link"><h3>Sobre nosotros</h3><ul><li><a href="#">Enlace</a></li></ul></div>
      <div class="link"><h3>Servicios</h3><ul><li><a href="#">Enlace</a></li></ul></div>
      <div class="link"><h3>Contacto</h3><ul><li><a href="#">Enlace</a></li></ul></div>
    </div>
  </footer>

  <!-- JavaScript general -->
  <script>
    function toggleCarrito() {
      const panel = document.getElementById('carrito');
      panel.classList.toggle('activo');
    }

    function toggleHamburguesa() {
      const panel = document.getElementById('hamburguesa-panel');
      panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
    }

    document.querySelectorAll('#hamburguesa-panel a').forEach(link => {
      link.addEventListener('click', () => {
        document.getElementById('hamburguesa-panel').style.display = 'none';
      });
    });

    // Mapa Leaflet
    document.addEventListener('DOMContentLoaded', () => {
      const mapa = L.map('mapa').setView([-34.6037, -58.3816], 13); // Buenos Aires

      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
      }).addTo(mapa);

      const veterinarias = [
        // CABA
        { nombre: "Veterinaria Centro", lat: -34.6037, lng: -58.3816 },
        { nombre: "Veterinaria Mascotitas", lat: -34.6012, lng: -58.3854 },
        { nombre: "VetCan", lat: -34.6075, lng: -58.3772 },
        { nombre: "Cl√≠nica Animal Norte", lat: -34.5922, lng: -58.4105 },
        { nombre: "Veterinaria Palermo Pets", lat: -34.5775, lng: -58.4304 },

        // Gran Buenos Aires
        { nombre: "VetLife San Isidro", lat: -34.4721, lng: -58.5221 },
        { nombre: "Centro Vet Quilmes", lat: -34.7204, lng: -58.2542 },
        { nombre: "Veterinaria Lan√∫s Este", lat: -34.7086, lng: -58.3945 },
        { nombre: "VetLomas", lat: -34.7609, lng: -58.4173 },

        // C√≥rdoba
        { nombre: "Veterinaria Central C√≥rdoba", lat: -31.4175, lng: -64.1833 },
        { nombre: "Cl√≠nica Animal Nueva C√≥rdoba", lat: -31.4260, lng: -64.1888 },

        // Rosario
        { nombre: "VetRosario Centro", lat: -32.9442, lng: -60.6505 },
        { nombre: "Veterinaria Sur Rosario", lat: -32.9730, lng: -60.6420 },

        // Mendoza
        { nombre: "Veterinaria Andes", lat: -32.8908, lng: -68.8272 },
        { nombre: "Mendoza Pets", lat: -32.8899, lng: -68.8447 },

        // Salta
        { nombre: "Cl√≠nica Animal Salta", lat: -24.7829, lng: -65.4232 },

        // Tucum√°n
        { nombre: "Vet Tucum√°n Centro", lat: -26.8160, lng: -65.2192 },

        // Mar del Plata
        { nombre: "Veterinaria Costa Atl√°ntica", lat: -38.0055, lng: -57.5426 }
      ];

      veterinarias.forEach(vet => {
        L.marker([vet.lat, vet.lng]).addTo(mapa)
          .bindPopup(`<b>${vet.nombre}</b>`);
      });
    });
  </script>

  <!-- Firebase y l√≥gica de registro -->
  <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-auth.js";
  import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBty_E25rWrBwOXxODtjAgFWYM4WjFlmTo",
    authDomain: "d-pets-2c330.firebaseapp.com",
    projectId: "d-pets-2c330",
    storageBucket: "d-pets-2c330.firebasestorage.app",
    messagingSenderId: "940776474785",
    appId: "1:940776474785:web:97d99e958ebb386d5c88e0"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  const formRegistro = document.getElementById("formRegistro");
  const mensaje = document.getElementById("mensaje");

  formRegistro.addEventListener("submit", async (e) => {
    e.preventDefault();
    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;

    try {
      // Crear usuario en Firebase Auth
      const userCredential = await createUserWithEmailAndPassword(auth, email, password);

      // Guardar datos b√°sicos en Firestore (colecci√≥n "usuarios", documento con UID)
      await setDoc(doc(db, "usuarios", userCredential.user.uid), {
        email: email,
        creado: new Date().toISOString(),
        tipo: "cliente"  // pod√©s guardar el tipo de usuario (cliente, proveedor, etc) y despu√©s agregar campos extras
      });

      mensaje.style.color = "green";
      mensaje.textContent = "Usuario registrado correctamente: " + userCredential.user.email;
      formRegistro.reset();
    } catch (error) {
      mensaje.style.color = "red";
      mensaje.textContent = "Error: " + error.message;
    }
  });
</script>
